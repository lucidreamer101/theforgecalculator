
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<title>The Forge Calculator Pro ‚Äì Roblox Crafting & Ore Guide</title>

<meta name="description" content="The Forge Calculator is a Roblox crafting helper for estimating forge multipliers, purity, ore combinations, and success chances for weapons and armor in The Forge. Updated December 2025.">

<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚öîÔ∏è</text></svg>">

<style>
@import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Roboto:wght@400;500;700&display=swap');

:root {
  --bg:#0d0d0d; --card:#1a1a1a; --accent:#ff4d00;
  --gold:#ffd700; --text:#fff; --text-dim:#999;
  --border:#333; --success:#00ff88; --danger:#ff3366;
}

/* BASE */
* { box-sizing:border-box; margin:0; padding:0; }
body {
  font-family:'Roboto',sans-serif;
  background:var(--bg);
  color:var(--text);
  padding:15px;
  padding-bottom:80px;
  overflow-x:hidden;
}

h1 {
  font-family:'Cinzel',serif;
  text-align:center;
  color:var(--gold);
  margin:20px 0;
}

.container { max-width:900px; margin:auto; position:relative; z-index:1; }

.panel {
  background:var(--card);
  border-radius:16px;
  padding:20px;
  margin-bottom:15px;
  border:1px solid var(--border);
}

/* MODE SWITCH */
.mode-switch { display:flex; gap:12px; margin-bottom:20px; }
.mode-btn {
  flex:1; padding:14px;
  background:var(--card);
  border:2px solid var(--border);
  border-radius:12px;
  font-weight:700;
  color:var(--text-dim);
  cursor:pointer;
  transition:all 0.3s ease;
}
.mode-btn:focus-visible {
  outline:2px solid var(--accent);
  outline-offset:2px;
}
.mode-btn.active {
  background:var(--accent);
  color:#fff;
  border-color:var(--accent);
}

/* STATS */
.stats-grid { display:grid; grid-template-columns:1fr 1fr 1fr; gap:12px; }
.stat-box {
  background:#252525;
  padding:15px;
  border-radius:12px;
  border:1px solid #444;
  text-align:center;
}
.stat-val { font-size:1.6rem; font-weight:700; color:var(--accent); }
.stat-lbl { font-size:.65rem; text-transform:uppercase; color:var(--text-dim); }

/* COMPOSITION */
.composition {
  margin-top:15px;
  padding:12px;
  background:#252525;
  border-radius:8px;
}
.comp-item {
  display:flex;
  justify-content:space-between;
  padding:6px 0;
  font-size:0.85rem;
}
.comp-bar {
  height:6px;
  background:#444;
  border-radius:3px;
  overflow:hidden;
  margin-top:4px;
}
.comp-fill {
  height:100%;
  background:var(--accent);
  transition:width 0.3s ease;
}

/* SELECTED */
.selected-list {
  display:flex;
  gap:10px;
  overflow-x:auto;
  padding:10px 0;
  min-height:90px;
}

.sel-item {
  min-width:80px;
  background:#2a2a2a;
  padding:10px;
  border-radius:12px;
  border:2px solid var(--accent);
  text-align:center;
  position:relative;
  cursor:pointer;
  transition:transform 0.2s ease;
}
.sel-item:active { transform:scale(0.95); }

.remove-tag {
  position:absolute;
  top:-5px; right:-5px;
  width:20px; height:20px;
  border-radius:50%;
  background:var(--danger);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:12px;
}

.empty-pot {
  width:100%;
  text-align:center;
  color:#666;
  font-style:italic;
  font-size:0.85rem;
}

/* TRAIT DISPLAY */
.trait-list {
  margin-top:12px;
  padding:10px;
  background:#1f1f1f;
  border-radius:8px;
  border:1px solid #333;
}
.trait-item {
  padding:6px 0;
  font-size:0.85rem;
  color:var(--success);
}
.trait-inactive {
  color:#666;
  text-decoration:line-through;
}

/* SEARCH */
.search {
  width:100%;
  padding:15px;
  margin-bottom:15px;
  background:#1a1a1a;
  border:2px solid #333;
  color:#fff;
  border-radius:12px;
  transition:border-color 0.3s ease;
}
.search:focus {
  outline:none;
  border-color:var(--accent);
}

/* GRID */
.ore-grid {
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(90px,1fr));
  gap:10px;
}

.ore-card {
  background:#1a1a1a;
  border:2px solid #333;
  border-radius:12px;
  padding:15px 6px;
  text-align:center;
  cursor:pointer;
  transition:all 0.2s ease;
  position:relative;
}
.ore-card:hover { 
  border-color:var(--accent); 
  transform:translateY(-2px);
}
.ore-card:active { transform:scale(0.95); }
.ore-card:focus-visible {
  outline:2px solid var(--accent);
  outline-offset:2px;
}

.ore-name {
  font-size:0.7rem;
  line-height:1.1;
  word-break:break-word;
  margin-top:4px;
}

.ore-trait {
  font-size:0.6rem;
  color:var(--success);
  margin-top:2px;
  min-height:14px;
}

/* EMPTY STATE */
.empty-grid {
  grid-column:1/-1;
  text-align:center;
  padding:40px 20px;
  color:#666;
  font-style:italic;
}

/* PROBS */
.prob-row {
  display:flex;
  justify-content:space-between;
  padding:10px 0;
  border-bottom:1px solid #222;
}
.prob-chance { color:var(--gold); font-weight:700; }

/* TOAST */
.toast {
  position:fixed;
  bottom:20px;
  left:50%;
  transform:translateX(-50%);
  background:var(--danger);
  color:#fff;
  padding:12px 24px;
  border-radius:8px;
  font-weight:600;
  box-shadow:0 4px 20px rgba(0,0,0,0.5);
  z-index:1000;
  animation:slideUp 0.3s ease;
}
@keyframes slideUp {
  from { bottom:-50px; opacity:0; }
  to { bottom:20px; opacity:1; }
}

/* BOTTOM INFO */
.info-section {
  margin-top:40px;
  background:linear-gradient(180deg,#1a1a1a,#141414);
  border:1px solid var(--border);
  border-radius:20px;
  padding:30px;
}

.info-section h2 {
  font-family:'Cinzel',serif;
  color:var(--gold);
  text-align:center;
  margin-bottom:20px;
  font-size:1.3rem;
}

.info-section p {
  color:var(--text-dim);
  font-size:0.9rem;
  line-height:1.6;
  margin-bottom:15px;
}

/* SNOW */
.snow {
  position:fixed;
  top:-10px;
  pointer-events:none;
  opacity:0.6;
  animation: fall linear infinite;
  z-index:-1;
  will-change:transform;
  transform:translateZ(0);
}
@keyframes fall { to { transform: translateY(110vh); } }

/* RESPONSIVE */
@media (max-width:480px) {
  body { padding:10px; padding-bottom:60px; }
  .panel { padding:15px; }
  h1 { font-size:1.5rem; }
  .stats-grid { grid-template-columns:1fr 1fr; }
}
</style>
</head>

<body>

<div id="snow-layer"></div>

<div class="container">

<h1>‚öîÔ∏è THE FORGE CALCULATOR ‚öîÔ∏è</h1>

<div class="mode-switch">
  <button id="btn-weapon" class="mode-btn active" aria-label="Switch to Weapon Forge">‚öîÔ∏è WEAPON</button>
  <button id="btn-armor" class="mode-btn" aria-label="Switch to Armor Forge">üõ°Ô∏è ARMOR</button>
</div>

<div class="panel">
  <div class="stats-grid">
    <div class="stat-box"><div id="avgMult" class="stat-val">0.00x</div><div class="stat-lbl">Avg Mult</div></div>
    <div class="stat-box"><div id="oreCount" class="stat-val">0</div><div class="stat-lbl">Total Ores</div></div>
    <div class="stat-box"><div id="oreTypes" class="stat-val">0/4</div><div class="stat-lbl">Ore Types</div></div>
  </div>
  <div id="purityMsg" style="margin-top:15px" role="status" aria-live="polite"></div>
  
  <div id="composition" class="composition" style="display:none;">
    <div style="font-size:0.7rem;color:var(--text-dim);margin-bottom:8px;">COMPOSITION</div>
    <div id="compList"></div>
  </div>
  
  <div id="traits" class="trait-list" style="display:none;">
    <div style="font-size:0.7rem;color:var(--text-dim);margin-bottom:6px;">ACTIVE TRAITS</div>
    <div id="traitList"></div>
  </div>
</div>

<div class="panel">
  <div style="font-size:.7rem;color:var(--text-dim)">POT CONTENT (TAP TO REMOVE)</div>
  <div id="selected" class="selected-list">
    <div class="empty-pot">No ores added yet. Select ores below!</div>
  </div>
</div>

<div class="panel"><div id="probs"></div></div>

<input id="search" class="search" placeholder="üîç Search ores (e.g., Diamond, Eye Ore)..." aria-label="Search for ores">
<div id="grid" class="ore-grid"></div>

<div class="info-section">
<h2>About The Forge Calculator</h2>

<p>
The Forge Calculator is a community-built crafting helper designed for players of the Roblox game <em>The Forge</em>. Updated for December 2025 with all 40+ ores including Galaxite, crystal ores, and the latest additions.
</p>

<p>
By selecting different ores (maximum 4 types as per game rules), the calculator estimates your average multiplier, forge purity, and composition breakdown. High-tier ores generally improve forge effectiveness, while mixing low-value materials can dilute results. The purity indicator highlights whether your ore mix is focused or inefficient.
</p>

<p>
<strong>New Features:</strong> Trait activation display shows which ore bonuses will apply to your forge (requires 10%+ of that ore). Composition percentages help you understand exactly what you're crafting with.
</p>

<p>
This calculator does not exploit or modify Roblox gameplay. It is an educational simulator intended to reduce guesswork and help players better understand forge mechanics. Data based on December 2025 game version.
</p>
</div>

</div>

<script>
/* DOM */
const btnWeapon=document.getElementById('btn-weapon');
const btnArmor=document.getElementById('btn-armor');
const avgMultEl=document.getElementById('avgMult');
const oreCountEl=document.getElementById('oreCount');
const oreTypesEl=document.getElementById('oreTypes');
const purityMsg=document.getElementById('purityMsg');
const selectedEl=document.getElementById('selected');
const probsEl=document.getElementById('probs');
const gridEl=document.getElementById('grid');
const searchEl=document.getElementById('search');
const compositionEl=document.getElementById('composition');
const compListEl=document.getElementById('compList');
const traitsEl=document.getElementById('traits');
const traitListEl=document.getElementById('traitList');

/* SNOW - Reduced count for better mobile performance */
const snowLayer=document.getElementById('snow-layer');
const isMobile = window.innerWidth<600;
const snowCount = isMobile ? 12 : 25;
for(let i=0;i<snowCount;i++){
 const s=document.createElement('div');
 s.className='snow';
 s.textContent='‚ùÑ';
 s.style.left=Math.random()*100+'vw';
 s.style.fontSize=(8+Math.random()*8)+'px';
 s.style.animationDuration=(6+Math.random()*6)+'s';
 s.style.animationDelay=(-Math.random()*10)+'s';
 snowLayer.appendChild(s);
}

/* TOAST NOTIFICATION */
function showToast(msg){
 const existing=document.querySelector('.toast');
 if(existing) existing.remove();
 const toast=document.createElement('div');
 toast.className='toast';
 toast.textContent=msg;
 document.body.appendChild(toast);
 setTimeout(()=>toast.remove(),2500);
}

/* COMPLETE ORE DATA - UPDATED DECEMBER 2025 */
const ORES=[
  // COMMON (World 1)
  {name:'Stone',mult:0.2,icon:'ü™®',trait:null},
  {name:'Sandstone',mult:0.25,icon:'‚è≥',trait:null},
  {name:'Copper',mult:0.3,icon:'üü†',trait:null},
  {name:'Iron',mult:0.35,icon:'‚öôÔ∏è',trait:null},
  {name:'Tin',mult:0.425,icon:'ü•´',trait:null},
  {name:'Silver',mult:0.5,icon:'‚ö™',trait:null},
  {name:'Gold',mult:0.65,icon:'üü°',trait:null},
  {name:'Cardboardite',mult:0.7,icon:'üì¶',trait:null},
  
  // UNCOMMON
  {name:'Platinum',mult:0.9,icon:'‚ö´',trait:null},
  {name:'Cobalt',mult:1.0,icon:'üîµ',trait:null},
  {name:'Lapis Lazuli',mult:1.1,icon:'üí†',trait:null},
  {name:'Titanium',mult:1.15,icon:'üõ°Ô∏è',trait:null},
  {name:'Volcanic Rock',mult:1.15,icon:'üåã',trait:null},
  {name:'Quartz',mult:1.2,icon:'üí†',trait:null},
  
  // RARE
  {name:'Amethyst',mult:1.8,icon:'üíú',trait:null},
  {name:'Topaz',mult:1.9,icon:'üü®',trait:null},
  {name:'Diamond',mult:2.0,icon:'üíé',trait:null},
  {name:'Sapphire',mult:2.2,icon:'üî∑',trait:null},
  {name:'Obsidian',mult:2.35,icon:'‚¨õ',trait:'Armor +30% Defense'},
  {name:'Cuprite',mult:2.43,icon:'üß±',trait:null},
  {name:'Emerald',mult:2.5,icon:'üíö',trait:null},
  {name:'Slimite',mult:2.5,icon:'üü¢',trait:null},
  {name:'Boneite',mult:2.8,icon:'ü¶¥',trait:null},
  
  // EPIC
  {name:'Ruby',mult:2.95,icon:'‚ù§Ô∏è',trait:null},
  {name:'Green Crystal',mult:3.0,icon:'üü¢',trait:null},
  {name:'Orange Crystal',mult:3.0,icon:'üü†',trait:null},
  {name:'Magenta Crystal',mult:3.2,icon:'üü£',trait:null},
  {name:'Rivalite',mult:3.33,icon:'‚ö°',trait:'Weapon +20% Crit Chance'},
  {name:'Crimson Crystal',mult:3.3,icon:'üî¥',trait:null},
  {name:'Blue Crystal',mult:3.4,icon:'üîµ',trait:null},
  {name:'Mythril',mult:3.5,icon:'‚ú®',trait:'Armor +15% Defense'},
  {name:'Uranium',mult:3.85,icon:'‚ò¢Ô∏è',trait:null},
  
  // LEGENDARY
  {name:'Eye Ore',mult:4.0,icon:'üëÅÔ∏è',trait:'Weapon +15% Dmg / -10% Vitality'},
  {name:'Dark Boneite',mult:4.2,icon:'üíÄ',trait:null},
  {name:'Fireite',mult:4.5,icon:'üî•',trait:'Burn Damage'},
  {name:'Magmaite',mult:5.0,icon:'üåã',trait:null},
  {name:'Rainbow Crystal',mult:5.25,icon:'üåà',trait:null},
  {name:'Lightite',mult:5.25,icon:'üí°',trait:null},
  {name:'Demonite',mult:5.5,icon:'üòà',trait:null},
  
  // MYTHICAL
  {name:'Darkryte',mult:6.3,icon:'üåë',trait:'Armor +30% Defense'},
  {name:'Arcane Crystal',mult:7.5,icon:'üîÆ',trait:null},
  
  // DIVINE
  {name:'Galaxite',mult:11.5,icon:'üåå',trait:null}
];

const ORE_MAP=Object.fromEntries(ORES.map(o=>[o.name,o]));
const WEAPON_PROBS={0:{Scrap:100},3:{Dagger:70,Gauntlet:30},8:{Katana:50,Longsword:50},15:{Greatsword:60,'Colossal Blade':40},25:{Godslayer:20,'Colossal Blade':80}};
const ARMOR_PROBS={0:{Cloth:100},5:{'Light Set':100},12:{'Medium Set':70},22:{'Heavy Set':80},40:{'Abyssal Armor':30}};

let pot={},mode='weapon';

function setMode(m){
 mode=m;
 btnWeapon.classList.toggle('active',m==='weapon');
 btnArmor.classList.toggle('active',m==='armor');
 update();
}

function addOre(n){
 // CRITICAL FIX: Game allows max 4 ore types, not 6
 if(!pot[n] && Object.keys(pot).length>=4) {
   showToast('‚ö†Ô∏è Maximum 4 ore types allowed (game limit)!');
   return;
 }
 pot[n]=(pot[n]||0)+1;
 update();
}

function removeOre(n){
 pot[n]>1?pot[n]--:delete pot[n];
 update();
}

function update(){
 const total=Object.values(pot).reduce((a,b)=>a+b,0);
 const types=Object.keys(pot).length;
 let sum=0,max=0;
 for(const n in pot){const o=ORE_MAP[n];sum+=o.mult*pot[n];max=Math.max(max,o.mult);}
 const avg=total?sum/total:0;
 
 // Update stats
 avgMultEl.textContent=avg.toFixed(2)+'x';
 oreCountEl.textContent=total;
 oreTypesEl.textContent=types+'/4';
 
 // Purity message
 purityMsg.innerHTML=!total?'':(avg/max>=0.85?'üíé High Purity - Excellent!':avg/max>=0.5?'‚ö†Ô∏è Diluted Mix':'‚ùå Poor Purity - Low Stats');
 
 // Composition
 if(total>0){
   compositionEl.style.display='block';
   compListEl.innerHTML='';
   for(const n in pot){
     const pct=((pot[n]/total)*100).toFixed(1);
     const o=ORE_MAP[n];
     compListEl.innerHTML+=`
       <div class="comp-item">
         <span>${o.icon} ${n}</span>
         <span style="color:var(--gold)">${pct}%</span>
       </div>
       <div class="comp-bar"><div class="comp-fill" style="width:${pct}%"></div></div>
     `;
   }
 } else {
   compositionEl.style.display='none';
 }
 
 // Traits (requires 10%+ of ore to activate)
 if(total>0){
   const activeTraits=[];
   for(const n in pot){
     const o=ORE_MAP[n];
     const pct=(pot[n]/total)*100;
     if(o.trait && pct>=10){
       activeTraits.push(o.trait);
     }
   }
   
   if(activeTraits.length>0){
     traitsEl.style.display='block';
     traitListEl.innerHTML=activeTraits.map(t=>`<div class="trait-item">‚úì ${t}</div>`).join('');
   } else {
     traitsEl.style.display='none';
   }
 } else {
   traitsEl.style.display='none';
 }
 
 renderSelected();
 renderProbs(total);
}

function renderSelected(){
 selectedEl.innerHTML='';
 if(Object.keys(pot).length===0){
   selectedEl.innerHTML='<div class="empty-pot">No ores added yet. Select ores below!</div>';
   return;
 }
 for(const n in pot){
  const o=ORE_MAP[n];
  const div=document.createElement('div');
  div.className='sel-item';
  div.onclick=()=>removeOre(n);
  div.innerHTML=`<div style="font-size:1.3rem">${o.icon}</div><div style="font-weight:700">√ó${pot[n]}</div><div style="font-size:0.65rem">${n}</div><div class="remove-tag">√ó</div>`;
  selectedEl.appendChild(div);
 }
}

function renderProbs(t){
 const tbl=mode==='weapon'?WEAPON_PROBS:ARMOR_PROBS;
 const k=Object.keys(tbl).map(Number).sort((a,b)=>b-a).find(v=>t>=v)??0;
 probsEl.innerHTML=`<div style="font-size:.7rem;color:var(--text-dim);margin-bottom:10px">CRAFTING PROBABILITIES (${t} ores)</div>`;
 for(const i in tbl[k])probsEl.innerHTML+=`<div class="prob-row"><span>${i}</span><span class="prob-chance">${tbl[k][i]}%</span></div>`;
}

let searchTimeout;
function renderGrid(){
 const q=searchEl.value.toLowerCase();
 gridEl.innerHTML='';
 const filtered=ORES.filter(o=>o.name.toLowerCase().includes(q));
 
 if(filtered.length===0){
   gridEl.innerHTML=`<div class="empty-grid">No ores found matching "${searchEl.value}"</div>`;
   return;
 }
 
 filtered.forEach(o=>{
  const card=document.createElement('div');
  card.className='ore-card';
  card.tabIndex=0;
  card.onclick=()=>addOre(o.name);
  card.onkeydown=(e)=>{if(e.key==='Enter'||e.key===' '){e.preventDefault();addOre(o.name);}};
  card.innerHTML=`
    <div style="font-size:1.5rem">${o.icon}</div>
    <div class="ore-name">${o.name}</div>
    <div style="color:var(--gold);font-size:.75rem;font-weight:700">${o.mult}x</div>
    <div class="ore-trait">${o.trait||''}</div>
  `;
  gridEl.appendChild(card);
 });
}

btnWeapon.onclick=()=>setMode('weapon');
btnArmor.onclick=()=>setMode('armor');

// Debounced search
searchEl.oninput=()=>{
 clearTimeout(searchTimeout);
 searchTimeout=setTimeout(renderGrid,150);
};

renderGrid();

// Expose for testing
window.ORES=ORES;
</script>
</body>
</html>
